<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Détails de la Commande</title>
</head>

<body>

    <div class="card mb-4 rounded-4 p-7">
        
        <div class="row mb-9 align-items-center justify-content-between">
            <div class="col-md-6 mb-8 mb-md-0">
                <h2 class="fs-4 mb-0">Liste des Commandes</h2>
                <p>Gérez et consultez les informations des commandes.</p>
            </div>
            
           
        </div>
        
        <div class="card-body px-0 pt-7 pb-0">
          <div class="row mb-4">
            <div class="col-md-4">
              <input
                type="text"
                class="form-control"
                placeholder="Rechercher par ID ou nom du client"
                [(ngModel)]="searchText"
                (input)="applyFilters()" />
            </div>
          
            <div class="col-md-2">
              <select class="form-select" [(ngModel)]="selectedStatus" (change)="applyFilters()">
                <option value="">Tous les statuts</option>
                <option value="true">Complété</option>
                <option value="false">En cours</option>
              </select>
            </div>
          
            <div class="col-md-3">
              <input
                type="date"
                class="form-control"
                [(ngModel)]="selectedDate"
                (change)="applyFilters()" />
            </div>
          </div>
          
            
            <div class="table-responsive">
                <table class="table table-hover align-middle table-nowrap mb-0" *ngIf="paginatedOrders.length > 0; else noOrders">
                  <thead>
                    <tr>
                      <th class="text-center">Sélection</th>
                      <th>ID Commande</th>
                      <th>Client</th>
                      <th>Total</th>
                      <th>Date de la Commande</th>
                      <th>Status</th>
                      <th class="text-center">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let order of paginatedOrders">
                      <td class="text-center">
                        <div class="form-check">
                          <input class="form-check-input rounded-0 ms-0" type="checkbox" />
                        </div>
                      </td>
                      <td>{{ order.id }}</td>
                      <td>{{ order.recipientName }}</td>
                      <td>{{ order.totalPrice | currency }}</td>
                      <td>{{ order.orderDate | date: 'dd/MM/yyyy' }}</td>
                      <td>
                        <span
                          class="badge rounded-lg rounded-pill alert py-3 px-4 mb-0"
                          [ngClass]="order.status ? 'alert-success' : 'alert-warning'"
                          (click)="toggleOrderStatus(order)"
                          style="cursor: pointer;"
                          title="Click to change status"
                        >
                          {{ order.status ? 'Complété' : 'En cours' }}
                        </span>
                      </td>
                      
                      <td class="text-center">
                        <div class="d-flex flex-nowrap justify-content-center">
                          <!-- <a class="btn btn-primary py-4 px-5 btn-xs fs-13px me-4" (click)="openUpdatePopup(order)">Modifier</a> -->
                          <a class="btn btn-outline-danger btn-hover-bg-danger py-4 px-5 fs-13px btn-xs me-4" (click)="deleteOrder(order.id)">Supprimer</a>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
                <ng-template #noOrders>
                  <p>Aucune commande trouvée pour les critères sélectionnés.</p>
                </ng-template>
              </div>

            <!-- Pagination Controls -->
            <div class="pagination-container">
              <button (click)="prevPage()" [disabled]="currentPage === 1">Précédent</button>
              <span>Page {{ currentPage }} sur {{ totalPages }}</span>
              <button (click)="nextPage()" [disabled]="currentPage === totalPages">Suivant</button>
            </div>
        </div>
    </div>

</body>

</html>
